(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();const o={SCRIPT_ID:"scrollingEffects",ROOT_MARGIN_TOP_DESKTOP:5,ROOT_MARGIN_BOT_DESKTOP:20,ROOT_MARGIN_TOP_MOBILE:20,ROOT_MARGIN_BOT_MOBILE:25,MOBILE_WIDTH_CUTOFF_PX:640,MOBILE_TOP_PADDING_VH:40,INTERSECTION_RATE:100,BLUR_STRENGTH_MAX:20,MECH_ROTATE_MAX:.2,MECH_PERSPECTIVE_AMT:40,MECH_SCALE_AMT:.5,BRIGHTNESS_MIN:2,BRIGHTNESS_MAX:1,VIGNETTE_EFFECT_ENABLE:!1,CAPTION_FADEIN_ENABLE:!1,CAPTION_FADEIN_THRESHOLD:.8,OBSERVER_RESET_WATCHER_INTERVAL:200,DEBUG:!1};function E(t){var e;return(e=t.shadowRoot)==null?void 0:e.querySelector(".media")}function u(t,{filter:e,transform:r}){const s=E(t);if(!s)throw Error("Vignette does not have a .media element!");s.style.filter=e,s.style.transform=r}function R(t){const e=`blur(${o.BLUR_STRENGTH_MAX}px) brightness(${o.BRIGHTNESS_MIN*100}%)`,r=`perspective(${o.MECH_PERSPECTIVE_AMT}vw) rotateX(${o.MECH_ROTATE_MAX}turn) scale(${o.MECH_SCALE_AMT}`;return u(t,{filter:e,transform:r})}function d(t,e){return t.documentElement.clientWidth<o.MOBILE_WIDTH_CUTOFF_PX}function _(t){const e=t.getElementsByTagName("media-item");return Object.values(e).sort()}function f(t,e){e.forEach(r=>{t.observe(r)})}function O(t){let e=!1;return r=>{const s=r==t;return!s&&!e?(e=!0,!1):!s||!e?!1:(e=!1,!0)}}function m(t){let e=[];store.subscribe(()=>{const r=store.getState().frontendState.renderedPages;r!==e&&(r.filter(s=>!e.includes(s)).forEach(t),e=r)})}function l(t,e){t.disconnect();const r=_(e);f(t,r)}function g(t){const e=d(t),r=e?o.ROOT_MARGIN_TOP_MOBILE:o.ROOT_MARGIN_TOP_DESKTOP,s=e?o.ROOT_MARGIN_BOT_MOBILE:o.ROOT_MARGIN_BOT_DESKTOP,i={threshold:Array(o.INTERSECTION_RATE).fill(0).map((c,a)=>a/o.INTERSECTION_RATE),root:null,rootMargin:`-${r}% 0% -${s}% 0% `};return new IntersectionObserver(M,i)}function M(t){t.forEach(e);return;function e(r){const s=r.target;if(!E(s))return;const n=r.intersectionRatio,i=r.boundingClientRect.top<r.rootBounds.top,c=A(n),a=S(n,i),T=n.toString();try{u(s,{filter:c,transform:a}),r.target.style.opacity=T}catch(I){console.error(I)}}}function A(t){const e=o.BLUR_STRENGTH_MAX-Math.round(t*o.BLUR_STRENGTH_MAX),r=t*(o.BRIGHTNESS_MAX-o.BRIGHTNESS_MIN)+o.BRIGHTNESS_MIN;return`blur(${e}px) brightness(${r*100}%)`}function S(t,e){if(t==1)return"";const r=o.MECH_PERSPECTIVE_AMT,s=o.MECH_ROTATE_MAX-t*o.MECH_ROTATE_MAX,n=e?s:-s,c=1-o.MECH_SCALE_AMT+t*o.MECH_SCALE_AMT;return`perspective(${r}vw) rotateX(${n}turn) scale(${c})  `}C();function C(){console.log("Scrolling effects by @oxgr");const t=document.querySelector(`#${o.SCRIPT_ID}`);t||console.warn(`Script element could not be found!
Does the ID set on the element in Cargo match Params.SCRIPT_ID?

SCRIPT_ID: '${o.SCRIPT_ID}'

ID is required to track page element changes and reset IntersectionObserver reliably.
Proceeding with timer reset...`);const e=_(document),r=g(document);if(f(r,e),e.forEach((n,i)=>{i!=0&&R(n)}),t){m(n=>{n.querySelector(`#${o.SCRIPT_ID}`)&&l(r,document)});return}const s=O("/");setInterval(()=>{s(window.location.pathname)&&l(r,document)},o.OBSERVER_RESET_WATCHER_INTERVAL)}
