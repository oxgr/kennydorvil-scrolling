(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const e={ROOT_MARGIN_TOP_DESKTOP:5,ROOT_MARGIN_BOT_DESKTOP:20,ROOT_MARGIN_TOP_MOBILE:25,ROOT_MARGIN_BOT_MOBILE:30,MOBILE_WIDTH_CUTOFF_PX:640,MOBILE_TOP_PADDING_VH:40,INTERSECTION_RATE:100,BLUR_STRENGTH_MAX:20,MECH_ROTATE_MAX:.2,MECH_PERSPECTIVE_AMT:40,MECH_SCALE_AMT:.5,OPACITY_MIN:0,DEBUG:!0},u=y(e.DEBUG);N();function N(){console.log("Scrolling effects by @oxgr"),document.querySelector("#scrollingEffects");const r=document.querySelectorAll(".linked");B(document.body);const o=C({isMobile:S(document)});r.forEach(i=>{o.observe(i)})}function S(r){return r.documentElement.clientWidth<e.MOBILE_WIDTH_CUTOFF_PX}function C({isMobile:r}){const o=r?e.ROOT_MARGIN_TOP_MOBILE:e.ROOT_MARGIN_TOP_DESKTOP,i=r?e.ROOT_MARGIN_BOT_MOBILE:e.ROOT_MARGIN_BOT_DESKTOP,l=Array(e.INTERSECTION_RATE).fill(0).map((a,c)=>c/e.INTERSECTION_RATE),t={root:null,rootMargin:`-${o}% 0% -${i}% 0% `,threshold:l};return new IntersectionObserver(n,t);function n(a){a.forEach(c=>{const d=c.intersectionRatio,A=c.rootBounds.top,M=c.boundingClientRect.top<A,p=I(d),R=h(d,M),_=c.target.shadowRoot.querySelector("img.media");_.style.filter=p,_.style.transform=R;const E=c.target.querySelector(".image-caption");E&&(E.style.opacity=d*d),u.add("outline",c.target.style.outline),c.target.href.includes("04")&&u.print();return;function g(s){return`${s*(1-e.OPACITY_MIN)+e.OPACITY_MIN}`}function I(s){return`blur(${e.BLUR_STRENGTH_MAX-Math.round(s*e.BLUR_STRENGTH_MAX)}px) brightness(${g(s)*100}%)`}function h(s,f){if(s==1)return"";const b=e.MECH_PERSPECTIVE_AMT,T=e.MECH_ROTATE_MAX-s*e.MECH_ROTATE_MAX,O=f?T:-T,m=1-e.MECH_SCALE_AMT+s*e.MECH_SCALE_AMT;return u.rotateAmtBase=T,u.rotateAmt=O,u.rotateRatio=s,u.scaleAmt=m,u.initRatio=s,`perspective(${b}vw) rotateX(${O}turn) scale(${m})  `}})}}function P(r,o,{id:i,classList:l}){const t=document.createElement(o);return i&&(t.id=i),l&&t.classList.add(...l),r.append(t),t}function B(r){return P(r,"div",{id:"vignetteEffect",classList:[]})}class y{constructor(o){this.enabled=o,this.element=addthis.bugElement(document.body),this.obj={}}add(o,i){this.enabled&&(this.obj[o]=i)}print(){if(!this.enabled)return;const o=JSON.stringify(this.obj,null,2).replaceAll('"',"");this.element.innerHTML=o}}
